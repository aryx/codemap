#-*- org -*-

* Last

** Last 5

*** add arch_code colors for README.md, pad.org, .gitignore?


*** why codemap can't parse most .go files? lots of red!

*** why can't see content of configure script in codemap?
because no extension?


*** RELAX cleanup the code, switch to Fpath.t in model.ml
but need syncweb working first?

*** consider CLI.ml as Main.ml

*** RELAX colorize specialy capabilities in codemap!
present in AST_ocaml.ml ? present in AST_generic.ml if use
generic highlighters? need ocaml-specific highlighter?

*** untangle some of the deps to semgrep.core from codemap
because of Lang.ml, because of Naming_AST.ml depending
on semgrep.typing depending on semgrep.core, etc.

*** Makefile mode, so can visualize Makefiles
need tree-sitter-makefile? add it in codemap/languages/

*** RELAX Log src for gui event, log src for db event
but set LOG_SRCS from Arg flag callback?

and make sure default codemap does not show much
unless you set LOG_SRCS


*** still? remove use of common_parent, force single root parameter?
but I use the ability to use multiples dirs when exploring
r2c codebases so good to keep?


** Last 4

*** Can't use search anymore, blocked

*** add GHA checks, build, test, and semgrep

*** RELAX use Fpath.t, Logs, GHA, and maybe even capabilities :)

** Last 3

*** codemap on Naming_AST.ml is ugly
update to latest semgrep? don't parse the object code?

*** tree-sitter-make?
with bash embedded?

so can visualize my Makefile nicely?

fork it? still didn't fix the issue I reported?

AST_Makefile? like AST_dockerfile

*** improve Makefile visualization, finish tree-sitter-make integration

*** improve Yaml visualization, fix weird tokens generated by Emma?

*** fix yaml and codemap?
weird file position, tell Emma?

*** RELAX update codemap/efuns with better colors for Xxx_, UXxx, CapXxx

*** -filter .go, .ml[], whatever extension?

*** ---------------------------------------

*** fix visualization of files without trailine newline
for ex cant visualize jsonnet files under tests/jsonnet/ without
trailing newlines

*** seems a bit slower, or seems to require me to press C-r to force refresh
because there's no content. ex: Go on Core_result.ml, takes forever
to get the actual content displayed; you just get a big green screen.
and after C-r it comes

*** finish opam release stuff so can use codemap from semgrep!!
or use semgrep from codemap!!


** Last 2

*** problem with generated layers by codegraph_build, get ofv float exn
when trying to read the layer in codemap

test: opam switch 4.12.0 ... make index ... cm .
and see exn

*** fix codemap on our typescript code
thx to tree-sitter-typescript!

*** use tree-sitter libs for OCaml!
# update: with pfff integrated in semgrep, and osemgrep and releasing in OPAM,
# this might become easier

see Semgrep_envvars.ml
=> need to switch to tree-sitter for parsing OCaml? link tree-sitter parsers
with codemap?

Textedit.{path = ...} (was in Output.ml)

type t = private int (in Exit_code.mli)

and foo = bar [@@deriving] (was in IL.ml)
and xxx = zzz
[@@deriving ]

*** use tree-sitter libs in codemap! for TS/C++/...
tree-sitter-langs? ocaml-tree-sitter-lang repo?
so can also use codemap for C++ code!
use https://github.com/returntocorp/ocaml-tree-sitter-languages

someone from Facebook recently wanted to use ocaml-tree-sitter for Pyre :)

*** weird bug on deep-semgrep/src/core/sig/Name.ml where if
last line does not contain a newline then no display

** Last 1

*** use model-view-update to simplify the code?

*** fix efuns, codemap, emacs config, macos config, etc.

**** efuns: Thread.kill not available and all those
second cursor errors

**** codemap: no more regexps displayed, just the leading /
because split_info? need put back in stream of tokens?

*** RELAX move arch_code.* out of pfff, move h_visualization/ too
put in codemap

*** RELAX maybe move highlight_code.ml in codemap 
so easy to change color constructor?

*** RELAX add highlight_code.ml to Visual.mw?

*** codemap not highlighing correctly fields in visitors
in Analyze_pattern.ml

*** move all pfff/todo.txt in codemap/todo.txt


*** make it work on MacOS!
seems to display at the beginning, especially id don't add -screen_size
and use default, but after it disappears

*** rely on Naming_AST.ml to uncomment code in Highlight_AST.ml
for better color for params, locals, globals (test on C code),
but also improve method vs func, etc. 
Fix all the commented-out code.

*** switch to lablgtk3?
even gtk4 lately.

*** factorize AST-based lang-specific highlighters in Highlight_AST.ml?
Java,
Python,
etc.
so can remove more visitor_xxx.ml ?

*** switch to revery? more portable? better code orga? FRP/ELM wins?

*** codemap on parser_ruby.dyp does not work anymore

